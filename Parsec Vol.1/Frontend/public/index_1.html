<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Blood Parser</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header id="home">
        <div class="logo"><img src="blood-drop-logo.jpg">Dr. Parser</div>
        <nav>
            <ul>
                <li><a class="item" href="#about">About Us</a></li>
                <li><a class="item" href="#aim">Our Aim</a></li>
                <li><a class="item" href="#duty">Social Duty</a></li>
                <li><a class="item" href="#vision">Future Vision</a></li>
                <li><a class="item" href="#recommendations">What People Say</a></li>
                <li><a class="item" href="#contact">Contact Us</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <img src="euphoria_logo.jpg">
        <h1>AI-Powered Blood Report Analysis</h1>
        <p><strong>Upload your blood test report and get instant insights into your health!</strong></p>
        <div class="int">(Images Only)  &emsp; <input class="int" type="file" id="fileUpload" accept="image/*,.pdf"></div>
        <button class="pdf_up" onclick="uploadFile()">Upload</button>
    </section>

    <section id="results" style="display: none;">
        <h2>REPORT ANALYSIS</h2>
        <div id="analysisOutput" class="result-box" ></div>

        <h6>*Disclaimer: This is an AI-generated output and should not be considered medical advice. Please consult a qualified doctor or healthcare professional before making any health-related decisions or taking any action based on this report.</h6>
    </section>

    <section id="about">
        <h2>About Us</h2>
        <p>We are <strong>Team Euphoria</strong>, a group of passionate tech enthusiasts. Our goal is to leverage technology to create innovative solutions in the healthcare sector.</p>
        <p>Our project focuses on developing an <strong>instant blood report parser</strong> that extracts and analyzes key health metrics from medical reports. Using advanced AI/ML techniques, we aim to simplify and enhance the interpretation of diagnostic reports for both medical professionals and individuals.</p>
        <p>Meet our team:</p>
        <ul>
            <li><strong>Gyanvir Singh</strong></li>
            <li><strong>Himanshu Bansal</strong></li>
            <li><strong>Rajveer Rangile</strong></li>
        </ul>
        <p>We are excited to contribute to the future of healthcare technology!</p>
    </section>


    <section id="aim">
        <h2>Our Aim</h2>
        <p>At <strong>Team Euphoria</strong>, our mission is to bridge the gap between technology and healthcare by developing smart, AI-driven solutions. Through our contribution, we aim to innovate and simplify medical diagnostics.</p>
        <p>Our project, the <strong>Blood Report Parser</strong>, is designed to extract, interpret, and present critical health metrics from medical reports in a structured and accessible format. By leveraging AI/ML, OCR, and automation, we seek to make health data more understandable for both healthcare professionals and patients.</p>
        <p>We envision a future where medical diagnostics are faster, more accurate, and easily accessible, empowering individuals to take charge of their health.</p>
    </section>

    <section id="duty">
        <h2>Social Duty</h2>
        <p>At <strong>Team Euphoria</strong>, we believe that technology should be a force for good. With our <strong>Blood Report Parser</strong>, we aim to make healthcare more accessible, understandable, and efficient for everyone, regardless of their medical background.</p>
        <p>Many people struggle to interpret complex blood reports, leading to delays in seeking medical attention. Our solution bridges this gap by simplifying medical data, allowing individuals to quickly understand their health status and take informed decisions.</p>
        <p>Beyond personal health, our project has the potential to support rural healthcare centers, NGOs, and government initiatives focused on preventive care. By providing a quick and automated way to analyze blood reports, we hope to assist healthcare professionals in reaching more patients, ensuring timely intervention, and improving overall public health outcomes.</p>
        <p>We are committed to leveraging technology to create a healthier and more informed society.</p>
       
    </section>

    <section id="vision">
        <h2>Future Vision</h2>
        <p>Currently, our <strong>Blood Report Parser</strong> utilizes <strong>Gemini AI</strong> to analyze extracted data and provide users with potential insights into their health conditions. While this is a significant step, we aim to take our solution even further.</p>
        <p>In the future, we plan to enhance our system with:</p>
        <ul>
            <li><strong>Advanced AI Models:</strong> A more robust model capable of dynamically understanding reference ranges from uploaded reports.</li>
            <li><strong>Better UI/UX:</strong> A more intuitive and seamless interface for a smoother user experience.</li>
            <li><strong>Expanded File Support:</strong> Direct PDF uploads alongside images for greater convenience.</li>
            <li><strong>Improved Accuracy:</strong> Refining OCR and AI processing for higher precision and reliability.</li>
            <li><strong>Login & Authorization:</strong> A secure login system to allow users to track and store their past reports for better health monitoring.</li>
        </ul>
        <p>Our vision is to make medical diagnostics more accessible and intelligent, ensuring that individuals receive accurate and actionable health insights effortlessly.</p>
    
    </section>

    <section id="rec">
        <!-- What People Say -->
        <section id="recommendations">
            <h2>What People Say</h2>
            <div class="all_recommendations" id="all_recommendations">
                <div class="recommendation">
                    <span>&#8220;</span>
                    A game-changer for quick and easy medical report analysis! This tool makes understanding blood reports so much simpler
                    <span>&#8221;</span>
                </div>
                <div class="recommendation">
                    <span>&#8220;</span>
                    As someone with no medical background, this tool helped me interpret my reports effortlessly. The AI-based insights are a huge plus!
                    <span>&#8221;</span>
                </div>
                <div class="recommendation">
                    <span>&#8220;</span>
                    Great initiative! With future improvements like better UI and dynamic reference ranges, this has the potential to be a must-have healthcare tool
                    <span>&#8221;</span>
                </div>
            </div>
        </section>

        <!-- Recommendation Form -->
        <div id="contact">
            <fieldset>
                <div class="lev">
                    <legend class="introduction">Leave a Recommendation</legend>
                </div>
                <textarea id="new_recommendation" cols="500" rows="10" placeholder="Write your recommendation..."></textarea>
                <div class="flex_center">
                    <button id="recommend_btn" onclick="addRecommendation()">Submit</button>
                </div>
                <div class="all_recommendations" id="all_recommendations"></div>
            </fieldset>
        </div>
    </section>

    <div class="iconbutton">
        <a href="#home">
            <!--Add the code here for the logo to appear and the icon to be actionable-->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white"
                width="63px">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        </a>
    </div>


    <footer>
        <p>Made with ❤ By team Euphoria</p>
        <p>© All rights reserved.</p>
    </footer>

    <script>


        async function uploadFile() {
            const fileInput = document.getElementById("fileUpload");
            const uploadButton = document.querySelector(".pdf_up");
            const file = fileInput.files[0];
            if (!file) {
                alert("Please select a file first.");
                return;
            }

            // Disable the button
            uploadButton.disabled = true;
            uploadButton.innerText = "Uploading...";


            const formData = new FormData();
            formData.append("file", file);

            try {
                const response = await fetch("http://localhost:8000/upload/", {
                    method: "POST",
                    body: formData
                });

                const result = await response.json();
                console.log("Upload Response:", result);

                // Store response in sessionStorage
                sessionStorage.setItem("uploadreportResult", JSON.stringify(result));

                // Display response on the page
                displayResult(result);
            } catch (error) {
                console.error("Upload failed:", error);
                alert("Upload failed. Please try again.");
            } finally{
                uploadButton.disabled = false;
                uploadButton.innerText = "UPLOAD";
            }
        }

        function displayResult(data) {
            const resultsSection = document.getElementById("results");
            const outputDiv = document.getElementById("analysisOutput");
            outputDiv.innerHTML = "";

            if (!data) {
                outputDiv.innerHTML = "<p>No data available.</p>";
                resultsSection.style.display = "none"; // Hide section if no data
                return;
            }

            // Show the result section when data is available
            resultsSection.style.display = "block";

            let resultHTML = `
            <div class="mt-6 p-4 bg-white rounded-lg shadow-md w-full max-w-2xl">
                    <h3 class="text-xl font-semibold mt-4">Classified Data:</h3>
                    <table class="w-full border-collapse border border-gray-300">
                        <thead>
                            <tr class="bg-gray-200">
                                <th class="border p-2">Category</th>
                                <th class="border p-2">Parameters</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${Object.entries(data.classified_data)
                                .map(([category, values]) => `
                                    <tr>
                                        <td class="border p-2 font-semibold">${category}</td>
                                        <td class="border p-2">
                                            ${values.length > 0 ? values.map(([param, value]) => `<div>${param}: ${value}</div>`).join('') : "None"}
                                        </td>
                                    </tr>
                                `).join('')}
                        </tbody>
                    </table>

                    <div class="overflow-x-auto">
                        <h3 class="text-xl font-semibold mb-2">Parsec Analysis:</h3>
                        <table class="w-full border-collapse border border-gray-300 shadow-md bg-white">
                            <thead>
                                <tr class="bg-gray-100">
                                    <th class="border border-gray-300 p-2 font-bold">Test Name</th>
                                    <th class="border border-gray-300 p-2 font-bold">Low/High</th>
                                    <th class="border border-gray-300 p-2 font-bold">*Disease</th>
                                    <th class="border border-gray-300 p-2 font-bold">*Causes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.final_table_rows
                                    .map(row => `
                                        <tr class="bg-gray-${data.final_table_rows.indexOf(row) % 2 === 0 ? '100' : 'white'}">
                                            ${row.map(cell => `<td class="border border-gray-300 px-4 py-2">${cell}</td>`).join('')}
                                        </tr>
                                    `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>`;

            outputDiv.innerHTML = resultHTML;
        }

        // Restore data on page load
        document.addEventListener("DOMContentLoaded", () => {
            const storedData = sessionStorage.getItem("uploadreportResult");
            if (storedData) {
                displayResult(JSON.parse(storedData));
            }
        });


        function addRecommendation() {
            let recommendation = document.getElementById("new_recommendation").value.trim();
            if (recommendation === "") {
                alert("Please enter a recommendation before submitting.");
                return;
            }

            let recommendationContainer = document.getElementById("all_recommendations");
            let newElement = document.createElement("div");
            newElement.className = "recommendation";
            newElement.innerHTML = `
                <span>&#8220;</span> ${recommendation} <span>&#8221;</span>
            `;
            recommendationContainer.appendChild(newElement);

            document.getElementById("new_recommendation").value = "";
        }

    </script>
</body>

</html>
